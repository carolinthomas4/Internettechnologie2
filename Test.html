<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sound-Memories</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    
	<style>
    	html, body, #map {
		height: 100%;
    	width: 100%;	
    	margin: 0;
    	padding: 0;
		}
	</style>
	
</head>
<body>
    <div id="map"></div>
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script> <!-- Einbindung Leaflet-Bibliothek -->
	
	<script>
//Einbinden der Karte
    // Bildgröße in Pixeln
    	const imageWidth = 1600; 
		const imageHeight = 1060; 

    // Initialisierung Leaflet-Karte 
    	const map = L.map('map', {
        	crs: L.CRS.Simple,  // Welches Koordinatensystem wird verwendet
        	minZoom: -2,        // Herauszoomen (Begrenzung)
        	maxZoom: 5,         // Maximale Zoom-Stufe
        	zoomSnap: 0.5       // Smoother Zoom
    	});

    // Text in rechter Ecke bearbeiten/entfernen
    map.attributionControl.setPrefix('IT2:)');
    
    // Zoom-Button + und - entfernen
    map.zoomControl.remove();

    // Definition der Bildgrenzen
    const southWest = map.unproject([0, imageHeight], map.getMaxZoom());
    const northEast = map.unproject([imageWidth, 0], map.getMaxZoom());
    const bounds = new L.LatLngBounds(southWest, northEast);

    // Bild als Overlay hinzufügen
    L.imageOverlay('Jade-Hochschule.jpg', bounds).addTo(map);
    
    // Karte auf Bildgrenzen einstellen
    map.fitBounds(bounds);

    // Minimalen Zoom festlegen nach 'fit bounds'
    const minZoom = map.getZoom();
    map.setMinZoom(minZoom); 
	// Maximaler Zoom
    map.setMaxZoom(10); 
    
    // Karte kann nicht über die Bildgrenzen verschoben werden
    map.setMaxBounds(bounds);

//Punkte setzen
		//Punkt-Aussehen:)
	const customIcon = L.icon({
    	iconUrl: 'Roter-punkt.png',  
    	iconSize: [32, 32],        // Größe des Icons
		iconAnchor: [16, 32],      // Wo Blase sitzt
    	popupAnchor: [0, -32]      // Wo Popup erscheint
	});
	

	let clickCoords; // global speichern

	map.on('contextmenu', function(e) {
    	clickCoords = e.latlng;
    	const form = document.getElementById('popupForm');
    	form.style.left = e.originalEvent.pageX + 'px';
    	form.style.top = e.originalEvent.pageY + 'px';
    	form.style.display = 'block';
	});
	
	function submitMarker() {
    const title = document.getElementById('markerTitle').value;

    L.marker(clickCoords, { icon: customIcon }).addTo(map)
        .bindPopup(title)
        .openPopup();

    // Formular wieder ausblenden & resetten
    document.getElementById('popupForm').style.display = 'none';
    document.getElementById('markerTitle').value = '';
}


</script>
	<div id="popupForm" style="display:none; position:absolute; background:white; padding:10px; border:1px solid #ccc; z-index:1000;">
    <label for="markerTitle">Erinnerung:</label><br>
    <input type="text" id="markerTitle"><br>
    <button onclick="submitMarker()">Hinzufügen</button>
</div>
</body>
</html>

